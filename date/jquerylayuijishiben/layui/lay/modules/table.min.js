layui.define(["laytpl","laypage","layer","form"],function(ah){var P=layui.$,ad=layui.laytpl,al=layui.laypage,ab=layui.layer,Z=layui.form,Y=layui.hint(),U=layui.device(),ai={config:{checkName:"LAY_CHECKED",indexName:"LAY_TABLE_INDEX"},cache:{},index:layui.table?layui.table.index+10000:0,set:function(b){var a=this;return a.config=P.extend({},a.config,b),a},on:function(b,a){return layui.onevent.call(this,Q,b,a)}},aj=function(){var c=this,b=c.config,a=b.id;return a&&(aj.config[a]=b),{reload:function(d){c.reload.call(c,d)},config:b}},Q="table",O=".layui-table",ae="layui-hide",ag="layui-none",H="layui-table-view",X=".layui-table-header",aa=".layui-table-body",K=".layui-table-main",af=".layui-table-fixed",I=".layui-table-fixed-l",ak=".layui-table-fixed-r",ac=".layui-table-tool",R=".layui-table-page",J=".layui-table-sort",D="layui-table-edit",q="layui-table-hover",L=function(b){var a='{{#if(item2.colspan){}} colspan="{{item2.colspan}}"{{#} if(item2.rowspan){}} rowspan="{{item2.rowspan}}"{{#}}}';return b=b||{},['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<thead>","{{# layui.each(d.data.cols, function(i1, item1){ }}","<tr>","{{# layui.each(item1, function(i2, item2){ }}",'{{# if(item2.fixed && item2.fixed !== "right"){ left = true; } }}','{{# if(item2.fixed === "right"){ right = true; } }}',function(){return b.fixed&&"right"!==b.fixed?'{{# if(item2.fixed && item2.fixed !== "right"){ }}':"right"===b.fixed?'{{# if(item2.fixed === "right"){ }}':""}(),'<th data-field="{{ item2.field||i2 }}" {{# if(item2.minWidth){ }}data-minwidth="{{item2.minWidth}}"{{# } }} '+a+' {{# if(item2.unresize){ }}data-unresize="true"{{# } }}>','<div class="layui-table-cell laytable-cell-',"{{# if(item2.colspan > 1){ }}","group","{{# } else { }}","{{d.index}}-{{item2.field || i2}}",'{{# if(item2.type !== "normal"){ }}'," laytable-cell-{{ item2.type }}","{{# } }}","{{# } }}",'" {{#if(item2.align){}}align="{{item2.align}}"{{#}}}>','{{# if(item2.type === "checkbox"){ }}','<input type="checkbox" name="layTableCheckbox" lay-skin="primary" lay-filter="layTableAllChoose" {{# if(item2[d.data.checkName]){ }}checked{{# }; }}>',"{{# } else { }}",'<span>{{item2.title||""}}</span>',"{{# if(!(item2.colspan > 1) && item2.sort){ }}",'<span class="layui-table-sort layui-inline"><i class="layui-edge layui-table-sort-asc"></i><i class="layui-edge layui-table-sort-desc"></i></span>',"{{# } }}","{{# } }}","</div>","</th>",b.fixed?"{{# }; }}":"","{{# }); }}","</tr>","{{# }); }}","</thead>","</table>"].join("")},j=['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<tbody></tbody>","</table>"].join(""),G=['<div class="layui-form layui-border-box {{d.VIEW_CLASS}}" lay-filter="LAY-table-{{d.index}}" style="{{# if(d.data.width){ }}width:{{d.data.width}}px;{{# } }} {{# if(d.data.height){ }}height:{{d.data.height}}px;{{# } }}">',"{{# if(d.data.toolbar){ }}",'<div class="layui-table-tool"></div>',"{{# } }}",'<div class="layui-table-box">',"{{# var left, right; }}",'<div class="layui-table-header">',L(),"</div>",'<div class="layui-table-body layui-table-main">',j,"</div>","{{# if(left){ }}",'<div class="layui-table-fixed layui-table-fixed-l">','<div class="layui-table-header">',L({fixed:!0}),"</div>",'<div class="layui-table-body">',j,"</div>","</div>","{{# }; }}","{{# if(right){ }}",'<div class="layui-table-fixed layui-table-fixed-r">','<div class="layui-table-header">',L({fixed:"right"}),'<div class="layui-table-mend"></div>',"</div>",'<div class="layui-table-body">',j,"</div>","</div>","{{# }; }}","</div>","{{# if(d.data.page){ }}",'<div class="layui-table-page">','<div id="layui-table-page{{d.index}}"></div>',"</div>","{{# } }}","<style>","{{# layui.each(d.data.cols, function(i1, item1){","layui.each(item1, function(i2, item2){ }}",".laytable-cell-{{d.index}}-{{item2.field||i2}}{ ","{{# if(item2.width){ }}","width: {{item2.width}}px;","{{# } }}"," }","{{# });","}); }}","</style>","</div>"].join(""),V=P(window),B=P(document),E=function(b){var a=this;a.index=++ai.index,a.config=P.extend({},a.config,ai.config,b),a.render()};E.prototype.config={limit:10,loading:!0,cellMinWidth:60,text:{none:"无数据"}},E.prototype.render=function(){var f=this,c=f.config;if(c.elem=P(c.elem),c.where=c.where||{},c.id=c.id||c.elem.attr("id"),c.request=P.extend({pageName:"page",limitName:"limit"},c.request),c.response=P.extend({statusName:"code",statusCode:0,msgName:"msg",dataName:"data",countName:"count"},c.response),"object"==typeof c.page&&(c.limit=c.page.limit||c.limit,c.limits=c.page.limits||c.limits,f.page=c.page.curr=c.page.curr||1,delete c.page.elem,delete c.page.jump),!c.elem[0]){return f}f.setArea();var b=c.elem,h=b.next("."+H),g=f.elem=P(ad(G).render({VIEW_CLASS:H,data:c,index:f.index}));if(c.index=f.index,h[0]&&h.remove(),b.after(g),f.layHeader=g.find(X),f.layMain=g.find(K),f.layBody=g.find(aa),f.layFixed=g.find(af),f.layFixLeft=g.find(I),f.layFixRight=g.find(ak),f.layTool=g.find(ac),f.layPage=g.find(R),f.layTool.html(ad(P(c.toolbar).html()||"").render(c)),c.height&&f.fullSize(),c.cols.length>1){var d=f.layFixed.find(X).find("th");d.height(f.layHeader.height()-1-parseFloat(d.css("padding-top"))-parseFloat(d.css("padding-bottom")))}f.pullData(f.page),f.events()},E.prototype.initOpts=function(c){var b=this,a=(b.config,{checkbox:48,space:15,numbers:40});c.checkbox&&(c.type="checkbox"),c.space&&(c.type="space"),c.type||(c.type="normal"),"normal"!==c.type&&(c.unresize=!0,c.width=c.width||a[c.type])},E.prototype.setArea=function(){var g=this,f=g.config,d=0,c=0,b=0,k=0,h=f.width||function(){var a=function(o){var m,e;o=o||f.elem.parent(),m=o.width();try{e="none"===o.css("display")}catch(p){}return !o[0]||m&&!e?m:a(o.parent())};return a()}();g.eachCols(function(){d++}),h-=function(){return"line"===f.skin||"nob"===f.skin?2:d+1}(),layui.each(f.cols,function(e,a){layui.each(a,function(m,i){var n;return i?(g.initOpts(i),n=i.width||0,void (i.colspan>1||(/\d+%$/.test(n)?i.width=n=Math.floor(parseFloat(n)/100*h):n||(i.width=n=0,c++),k+=n))):void a.splice(m,1)})}),g.autoColNums=c,h>k&&c&&(b=(h-k)/c),layui.each(f.cols,function(l,a){layui.each(a,function(o,n){var m=n.minWidth||f.cellMinWidth;n.colspan>1||0===n.width&&(n.width=Math.floor(b>=m?b:m))})}),f.height&&/^full-\d+$/.test(f.height)&&(g.fullHeightGap=f.height.split("-")[1],f.height=V.height()-g.fullHeightGap)},E.prototype.reload=function(b){var a=this;a.config.data&&a.config.data.constructor===Array&&delete a.config.data,a.config=P.extend({},a.config,b),a.render()},E.prototype.page=1,E.prototype.pullData=function(m,k){var v=this,g=v.config,f=g.request,b=g.response,p=function(){"object"==typeof g.initSort&&v.sort(g.initSort.field,g.initSort.type)};if(v.startTime=(new Date).getTime(),g.url){var t={};t[f.pageName]=m,t[f.limitName]=g.limit;var x=P.extend(t,g.where);g.contentType&&0==g.contentType.indexOf("application/json")&&(x=JSON.stringify(x)),P.ajax({type:g.method||"get",url:g.url,contentType:g.contentType,data:x,dataType:"json",headers:g.headers||{},success:function(a){a[b.statusName]!=b.statusCode?(v.renderForm(),v.layMain.html('<div class="'+ag+'">'+(a[b.msgName]||"返回的数据状态异常")+"</div>")):(v.renderData(a,m,a[b.countName]),p(),g.time=(new Date).getTime()-v.startTime+" ms"),k&&ab.close(k),"function"==typeof g.done&&g.done(a,m,a[b.countName])},error:function(c,a){v.layMain.html('<div class="'+ag+'">数据接口请求异常</div>'),v.renderForm(),k&&ab.close(k)}})}else{if(g.data&&g.data.constructor===Array){var w={},l=m*g.limit-g.limit;w[b.dataName]=g.data.concat().splice(l,g.limit),w[b.countName]=g.data.length,v.renderData(w,m,g.data.length),p(),"function"==typeof g.done&&g.done(w,m,w[b.countName])}}},E.prototype.eachCols=function(f){var d=P.extend(!0,[],this.config.cols),c=[],b=0;layui.each(d,function(h,a){layui.each(a,function(e,k){if(k.colspan>1){var i=0;b++,k.CHILD_COLS=[],layui.each(d[h+1],function(m,l){l.PARENT_COL||i==k.colspan||(l.PARENT_COL=b,k.CHILD_COLS.push(l),i+=l.colspan>1?l.colspan:1)})}k.PARENT_COL||c.push(k)})});var g=function(a){layui.each(a||c,function(h,e){return e.CHILD_COLS?g(e.CHILD_COLS):void f(h,e)})};g()},E.prototype.renderData=function(h,f,d,a){var i=this,w=i.config,t=h[w.response.dataName]||[],k=[],b=[],g=[],l=function(){return !a&&i.sortKey?i.sort(i.sortKey.field,i.sortKey.sort,!0):(layui.each(t,function(r,m){var c=[],s=[],n=[],p=r+w.limit*(f-1)+1;0!==m.length&&(a||(m[ai.config.indexName]=r),i.eachCols(function(v,z){var o=z.field||v,u=m[o];i.getColElem(i.layHeader,o);if(void 0!==u&&null!==u||(u=""),!(z.colspan>1)){var x=['<td data-field="'+o+'" '+function(){var y=[];return z.edit&&y.push('data-edit="'+z.edit+'"'),z.align&&y.push('align="'+z.align+'"'),z.templet&&y.push('data-content="'+u+'"'),z.toolbar&&y.push('data-off="true"'),z.event&&y.push('lay-event="'+z.event+'"'),z.style&&y.push('style="'+z.style+'"'),z.minWidth&&y.push('data-minwidth="'+z.minWidth+'"'),y.join(" ")}()+">",'<div class="layui-table-cell laytable-cell-'+function(){var y=w.index+"-"+o;return"normal"===z.type?y:y+" laytable-cell-"+z.type}()+'">'+function(){var y=P.extend(!0,{LAY_INDEX:p},m);return"checkbox"===z.type?'<input type="checkbox" name="layTableCheckbox" lay-skin="primary" '+function(){var e=ai.config.checkName;return z[e]?(m[e]=z[e],z[e]?"checked":""):y[e]?"checked":""}()+">":"numbers"===z.type?p:z.toolbar?ad(P(z.toolbar).html()||"").render(y):z.templet?function(){return"function"==typeof z.templet?z.templet(y):ad(P(z.templet).html()||String(u)).render(y)}():u}(),"</div></td>"].join("");c.push(x),z.fixed&&"right"!==z.fixed&&s.push(x),"right"===z.fixed&&n.push(x)}}),k.push('<tr data-index="'+r+'">'+c.join("")+"</tr>"),b.push('<tr data-index="'+r+'">'+s.join("")+"</tr>"),g.push('<tr data-index="'+r+'">'+n.join("")+"</tr>"))}),i.layBody.scrollTop(0),i.layMain.find("."+ag).remove(),i.layMain.find("tbody").html(k.join("")),i.layFixLeft.find("tbody").html(b.join("")),i.layFixRight.find("tbody").html(g.join("")),i.renderForm(),i.syncCheckAll(),i.haveInit?i.scrollPatch():setTimeout(function(){i.scrollPatch()},50),i.haveInit=!0,void ab.close(i.tipsIndex))};return i.key=w.id||w.index,ai.cache[i.key]=t,i.layPage[0===t.length&&1==f?"addClass":"removeClass"](ae),a?l():0===t.length?(i.renderForm(),i.layFixed.remove(),i.layMain.find("tbody").html(""),i.layMain.find("."+ag).remove(),i.layMain.append('<div class="'+ag+'">'+w.text.none+"</div>")):(l(),void (w.page&&(w.page=P.extend({elem:"layui-table-page"+w.index,count:d,limit:w.limit,limits:w.limits||[10,20,30,40,50,60,70,80,90],groups:3,layout:["prev","page","next","skip","count","limit"],prev:'<i class="layui-icon">&#xe603;</i>',next:'<i class="layui-icon">&#xe602;</i>',jump:function(m,c){c||(i.page=m.curr,w.limit=m.limit,i.pullData(m.curr,i.loading()))}},w.page),w.page.count=d,al.render(w.page))))},E.prototype.getColElem=function(f,d){var c=this,b=c.config;return f.eq(0).find(".laytable-cell-"+(b.index+"-"+d)+":eq(0)")},E.prototype.renderForm=function(a){Z.render(a,"LAY-table-"+this.index)},E.prototype.sort=function(w,s,A,o){var g,b,x=this,C={},t=x.config,v=t.elem.attr("lay-filter"),z=ai.cache[x.key];"string"==typeof w&&x.layHeader.find("th").each(function(f,e){var c=P(this),h=c.data("field");if(h===w){return w=c,g=h,!1}});try{var g=g||w.data("field");if(x.sortKey&&!A&&g===x.sortKey.field&&s===x.sortKey.sort){return}var d=x.layHeader.find("th .laytable-cell-"+t.index+"-"+g).find(J);x.layHeader.find("th").find(J).removeAttr("lay-sort"),d.attr("lay-sort",s||null),x.layFixed.find("th")}catch(k){return Y.error("Table modules: Did not match to field")}x.sortKey={field:g,sort:s},"asc"===s?b=layui.sort(z,g):"desc"===s?b=layui.sort(z,g,!0):(b=layui.sort(z,ai.config.indexName),delete x.sortKey),C[t.response.dataName]=b,x.renderData(C,x.page,x.count,!0),o&&layui.event.call(w,Q,"sort("+v+")",{field:g,type:s})},E.prototype.loading=function(){var b=this,a=b.config;if(a.loading&&a.url){return ab.msg("数据请求中",{icon:16,offset:[b.elem.offset().top+b.elem.height()/2-35-V.scrollTop()+"px",b.elem.offset().left+b.elem.width()/2-90-V.scrollLeft()+"px"],time:-1,anim:-1,fixed:!1})}},E.prototype.setCheckData=function(g,f){var d=this,c=d.config,b=ai.cache[d.key];b[g]&&b[g].constructor!==Array&&(b[g][c.checkName]=f)},E.prototype.syncCheckAll=function(){var f=this,d=f.config,c=f.layHeader.find('input[name="layTableCheckbox"]'),b=function(a){return f.eachCols(function(h,g){"checkbox"===g.type&&(g[d.checkName]=a)}),a};c[0]&&(ai.checkStatus(f.key).isAll?(c[0].checked||(c.prop("checked",!0),f.renderForm("checkbox")),b(!0)):(c[0].checked&&(c.prop("checked",!1),f.renderForm("checkbox")),b(!1)))},E.prototype.getCssRule=function(g,f){var d=this,c=d.elem.find("style")[0],b=c.sheet||c.styleSheet||{},h=b.cssRules||b.rules;layui.each(h,function(i,e){if(e.selectorText===".laytable-cell-"+d.index+"-"+g){return f(e),!0}})},E.prototype.fullSize=function(){var f,d=this,c=d.config,b=c.height;d.fullHeightGap&&(b=V.height()-d.fullHeightGap,b<135&&(b=135),d.elem.css("height",b)),f=parseFloat(b)-parseFloat(d.layHeader.height())-1,c.toolbar&&(f-=d.layTool.outerHeight()),c.page&&(f=f-d.layPage.outerHeight()-1),d.layMain.css("height",f)},E.prototype.getScrollWidth=function(b){var a=0;return b?a=b.offsetWidth-b.clientWidth:(b=document.createElement("div"),b.style.width="100px",b.style.height="100px",b.style.overflowY="scroll",document.body.appendChild(b),a=b.offsetWidth-b.clientWidth,document.body.removeChild(b)),a},E.prototype.scrollPatch=function(){var m=this,k=m.layMain.children("table"),v=m.layMain.width()-m.layMain.prop("clientWidth"),h=m.layMain.height()-m.layMain.prop("clientHeight"),g=m.getScrollWidth(m.layMain[0]),f=k.outerWidth()-m.layMain.width();if(m.autoColNums&&f<5&&!m.scrollPatchWStatus){var b=m.layHeader.eq(0).find("thead th:last-child"),p=b.data("field");m.getCssRule(p,function(c){var a=c.style.width||b.outerWidth();c.style.width=parseFloat(a)-g-f+"px",m.layMain.height()-m.layMain.prop("clientHeight")>0&&(c.style.width=parseFloat(c.style.width)-1+"px"),m.scrollPatchWStatus=!0})}if(v&&h){if(!m.elem.find(".layui-table-patch")[0]){var t=P('<th class="layui-table-patch"><div class="layui-table-cell"></div></th>');t.find("div").css({width:v}),m.layHeader.eq(0).find("thead tr").append(t)}}else{m.layHeader.eq(0).find(".layui-table-patch").remove()}var x=m.layMain.height(),w=x-h;m.layFixed.find(aa).css("height",k.height()>w?w:"auto"),m.layFixRight[f>0?"removeClass":"addClass"](ae),m.layFixRight.css("right",v-1)},E.prototype.events=function(){var k,b=this,p=b.config,l=P("body"),m={},d=b.layHeader.find("th"),g=".layui-table-cell",i=p.elem.attr("lay-filter");d.on("mousemove",function(n){var h=P(this),f=h.offset().left,c=n.clientX-f;h.attr("colspan")>1||h.data("unresize")||m.resizeStart||(m.allowResize=h.width()-c<=10,l.css("cursor",m.allowResize?"col-resize":""))}).on("mouseleave",function(){P(this);m.resizeStart||l.css("cursor","")}).on("mousedown",function(f){var c=P(this);if(m.allowResize){var a=c.data("field");f.preventDefault(),m.resizeStart=!0,m.offset=[f.clientX,f.clientY],b.getCssRule(a,function(n){var h=n.style.width||c.outerWidth();m.rule=n,m.ruleWidth=parseFloat(h),m.minWidth=c.data("minwidth")||p.cellMinWidth})}}),B.on("mousemove",function(c){if(m.resizeStart){if(c.preventDefault(),m.rule){var a=m.ruleWidth+c.clientX-m.offset[0];a<m.minWidth&&(a=m.minWidth),m.rule.style.width=a+"px",ab.close(b.tipsIndex)}k=1}}).on("mouseup",function(a){m.resizeStart&&(m={},l.css("cursor",""),b.scrollPatch()),2===k&&(k=null)}),d.on("click",function(){var c,a=P(this),f=a.find(J),e=f.attr("lay-sort");return f[0]&&1!==k?(c="asc"===e?"desc":"desc"===e?null:"asc",void b.sort(a,c,null,!0)):k=2}).find(J+" .layui-edge ").on("click",function(f){var c=P(this),a=c.index(),h=c.parents("th").eq(0).data("field");layui.stope(f),0===a?b.sort(h,"asc",null,!0):b.sort(h,"desc",null,!0)}),b.elem.on("click",'input[name="layTableCheckbox"]+',function(){var f=P(this).prev(),c=b.layBody.find('input[name="layTableCheckbox"]'),a=f.parents("tr").eq(0).data("index"),r=f[0].checked,h="layTableAllChoose"===f.attr("lay-filter");h?(c.each(function(o,n){n.checked=r,b.setCheckData(o,r)}),b.syncCheckAll(),b.renderForm("checkbox")):(b.setCheckData(a,r),b.syncCheckAll()),layui.event.call(this,Q,"checkbox("+i+")",{checked:r,data:ai.cache[b.key]?ai.cache[b.key][a]||{}:{},type:h?"all":"one"})}),b.layBody.on("mouseenter","tr",function(){var c=P(this),a=c.index();b.layBody.find("tr:eq("+a+")").addClass(q)}).on("mouseleave","tr",function(){var c=P(this),a=c.index();b.layBody.find("tr:eq("+a+")").removeClass(q)}),b.layBody.on("change","."+D,function(){var f=P(this),c=this.value,a=f.parent().data("field"),r=f.parents("tr").eq(0).data("index"),h=ai.cache[b.key][r];h[a]=c,layui.event.call(this,Q,"edit("+i+")",{value:c,data:h,field:a})}).on("blur","."+D,function(){var f,a=P(this),s=a.parent().data("field"),h=a.parents("tr").eq(0).data("index"),c=ai.cache[b.key][h];b.eachCols(function(n,e){e.field==s&&e.templet&&(f=e.templet)}),a.siblings(g).html(f?ad(P(f).html()||this.value).render(c):this.value),a.parent().data("content",this.value),a.remove()}),b.layBody.on("click","td",function(){var c=P(this),a=(c.data("field"),c.data("edit")),h=c.children(g);if(ab.close(b.tipsIndex),!c.data("off")){if(a){if("select"===a){}else{var f=P('<input class="layui-input '+D+'">');f[0].value=c.data("content")||h.text(),c.find("."+D)[0]||c.append(f),f.focus()}}else{h.find(".layui-form-switch,.layui-form-checkbox")[0]||Math.round(h.prop("scrollWidth"))>Math.round(h.outerWidth())&&(b.tipsIndex=ab.tips(['<div class="layui-table-tips-main" style="margin-top: -'+(h.height()+16)+"px;"+function(){return"sm"===p.size?"padding: 4px 15px; font-size: 12px;":"lg"===p.size?"padding: 14px 15px;":""}()+'">',h.html(),"</div>",'<i class="layui-icon layui-table-tips-c">&#x1006;</i>'].join(""),h[0],{tips:[3,""],time:-1,anim:-1,maxWidth:U.ios||U.android?300:600,isOutAnim:!1,skin:"layui-table-tips",success:function(o,n){o.find(".layui-table-tips-c").on("click",function(){ab.close(n)})}}))}}}),b.layBody.on("click","*[lay-event]",function(){var f=P(this),a=f.parents("tr").eq(0).data("index"),s=b.layBody.find('tr[data-index="'+a+'"]'),h="layui-table-click",c=ai.cache[b.key][a];layui.event.call(this,Q,"tool("+i+")",{data:ai.clearCacheKey(c),event:f.attr("lay-event"),tr:s,del:function(){ai.cache[b.key][a]=[],s.remove(),b.scrollPatch()},update:function(n){n=n||{},layui.each(n,function(t,r){if(t in c){var v,u=s.children('td[data-field="'+t+'"]');c[t]=r,b.eachCols(function(o,e){e.field==t&&e.templet&&(v=e.templet)}),u.children(g).html(v?ad(P(v).html()||r).render(c):r),u.data("content",r)}})}}),s.addClass(h).siblings("tr").removeClass(h)}),b.layMain.on("scroll",function(){var c=P(this),a=c.scrollLeft(),f=c.scrollTop();b.layHeader.scrollLeft(a),b.layFixed.find(aa).scrollTop(f),ab.close(b.tipsIndex)}),V.on("resize",function(){b.fullSize(),b.scrollPatch()})},ai.init=function(f,d){d=d||{};var c=this,b=P(f?'table[lay-filter="'+f+'"]':O+"[lay-data]"),g="Table element property lay-data configuration item has a syntax error: ";return b.each(function(){var h=P(this),e=h.attr("lay-data");try{e=new Function("return "+e)()}catch(k){Y.error(g+e)}var m=[],i=P.extend({elem:this,cols:[],data:[],skin:h.attr("lay-skin"),size:h.attr("lay-size"),even:"string"==typeof h.attr("lay-even")},ai.config,d,e);f&&h.hide(),h.find("thead>tr").each(function(a){i.cols[a]=[],P(this).children().each(function(p){var o=P(this),n=o.attr("lay-data");try{n=new Function("return "+n)()}catch(s){return Y.error(g+n)}var t=P.extend({title:o.text(),colspan:o.attr("colspan")||0,rowspan:o.attr("rowspan")||0},n);t.colspan<2&&m.push(t),i.cols[a].push(t)})}),h.find("tbody>tr").each(function(o){var n=P(this),l={};n.children("td").each(function(r,p){var a=P(this),s=a.data("field");if(s){return l[s]=a.html()}}),layui.each(m,function(r,p){var a=n.children("td").eq(r);l[p.field]=a.html()}),i.data[o]=l}),ai.render(i)}),c},ai.checkStatus=function(g){var f=0,d=0,c=[],b=ai.cache[g]||[];return layui.each(b,function(h,a){return a.constructor===Array?void d++:void (a[ai.config.checkName]&&(f++,c.push(ai.clearCacheKey(a))))}),{data:c,isAll:!!b.length&&f===b.length-d}},aj.config={},ai.reload=function(d,c){var b=aj.config[d];return c=c||{},b?(c.data&&c.data.constructor===Array&&delete b.data,ai.render(P.extend(!0,{},b,c))):Y.error("The ID option was not found in the table instance")},ai.render=function(b){var a=new E(b);return aj.call(a)},ai.clearCacheKey=function(a){return a=P.extend({},a),delete a[ai.config.checkName],delete a[ai.config.indexName],a},ai.init(),ah(Q,ai)});