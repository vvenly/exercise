!function(a,b){function c(d){this.width=d.width,this.height=d.height,this.mask=d.mask,this.titleText=d.titleText,this.content=d.content,this.onRender=d.onRender||function(){},this.num=Math.floor(1000*Math.random()),this.init()}b.require,c.prototype.init=function(){this.mask&&this.createMask(),this.createBody()},c.prototype.createMask=function(){var d=Math.max(document.documentElement.scrollHeight,window.screen.height,document.body.scrollHeight);this.maskDom=a('<div class="mod-layer" id="pass-'+this.num+'"></div>'),a("body").append(this.maskDom),this.maskDom.height(d)},c.prototype.show=function(){this.mask&&this.maskDom.show(),this.domBody.show()},c.prototype.hide=function(){this.mask&&this.maskDom.hide(),this.domBody.hide()},c.prototype.remove=function(){this.mask&&this.maskDom.remove(),this.domBody.remove()},c.prototype.createBody=function(){this.domBody=a('<div class="mod-layer-body" id="pass-content'+this.num+'"><div class="mod-layer-body-title"><span>'+this.titleText+'</span><a id="close-'+this.num+'" href="###"></a></div><div class="mod-layer-content"><div class="mod-layer-main"></div></div></div>'),a("body").append(this.domBody),this.domBody.css({width:this.width,height:this.height,marginLeft:"-"+parseInt(this.width)/2+"px",marginTop:"-"+parseInt(this.height)/2+"px"});var d=this.domBody.children(".mod-layer-content");d.height(this.height-this.domBody.children(".mod-layer-body-title").height()),this.content&&(d.children(".mod-layer-main").append(this.content),this.show()),this.bind(),this.onRender(this)},c.prototype.setContent=function(d){this.domBody.append(d),this.show()},c.prototype.bind=function(){var d=this;a("#close-"+this.num).on("click",function(e){d.hide(),e.preventDefault()})},b.define("module/layer",c)}(baidu,window.Pass),!function(d,g){function h(){c.visible&&c.hide()}function j(){c=new f}var c,f=(g.require,g.require("ui/dialog/confirm")),b={};b.showConfirm=function(i,a){return d.isNumber(a)&&setTimeout(h,a),c||j(),i&&c.setContent(i),c.show()},b.setEle=function(a){c||j(),c.setTmpl(a)},g.define("module/dialog",b)}(baidu,window.Pass),!function(a,b){var c=b.require,d=(c("module/dialog"),function(e){this.config=e});d.prototype={render:function(){this._schoolPannel=new Pass.module.layer({titleText:"选择学校",width:600,height:398,mask:!0,content:'<div class="dialog_parent" id="school_pannel"></div>'}),this.initSchool()},initSchool:function(){var f=this;a.sio.callByServer("https://passport.baidu.com/v2/api/?ucentertownlist&type=2",function(e){if("110000"==e.errno){var g='<div class="all_city">';a.each(e.data,function(h,i){g+='<span class="city j_city" data="'+h+'">'+i+"</span>"}),g+='</div><div class="all_school j_all_school"></div>',f._initSchoolFlag||(f._initSchoolFlag=!0,document.getElementById("school_pannel").innerHTML=g,f.initprovince("120001"),a("#school_pannel").find(".j_city").each(function(){a(this).on("click",function(h){var i=a(h.target).attr("data");i&&(a("#school_pannel").find(".j_all_school").html('<img src="/static/passpc-account/img/loading.gif" /> <span>加载中，请稍后...</span>'),f.initprovince(i))})}))}})},initprovince:function(f){var g=this,h="https://passport.baidu.com/v2/api/?ucentereducationlist&grade=5&province="+f;a.sio.callByServer(h,function(i){if("110000"==i.errno){var j="";""!=i.data?a.each(i.data,function(k,l){j+='<span class="city j_school" data="'+k+'">'+l+"</span>"}):j+='<span class="empty">暂时没有该地的数据</span>',a("#school_pannel").find(".j_all_school").empty(),a(j).appendTo(a("#school_pannel").find(".j_all_school"))}a("#school_pannel").find(".j_school").each(function(){a(this).on("click",function(l){var m=a(l.target).attr("data"),k=a(l.target).html();m&&(g.fire("selectSchool",{schoolCode:m,schoolName:k}),g.hide())})})})},show:function(){this._schoolPannel?this._schoolPannel.show():this.render(),this.fire("showSchool")},hide:function(){this._schoolPannel.hide(),this.fire("hideSchool")},on:function(g,h){if(!a.isFunction(h)){return this}var j,f=this._listeners_;return !f&&(f=this._listeners_={}),g.indexOf("on")&&(g="on"+g),!a.isArray(j=f[g])&&(j=f[g]=[]),f[g].unshift({handler:h}),this},fire:function(m,g){var h=function(i,l){this.type=i,this.returnValue=!0,this.target=l||null,this.currentTarget=null,this.preventDefault=function(){this.returnValue=!1}};m&&(m=new h(m));var k,t,q,j=this._listeners_,p=m.type,f=[m].concat(Array.prototype.slice.call(arguments,1));if(!j&&(j=this._listeners_={}),a.extend(m,g||{}),m.target=m.target||this,m.currentTarget=this,p.indexOf("on")&&(p="on"+p),a.isFunction(this[p])&&this[p].apply(this,f),(k=this._options)&&a.isFunction(k[p])&&k[p].apply(this,f),a.isArray(t=j[p])){for(k=t.length-1;k>-1;k--){q=t[k],q&&q.handler.apply(this,f),q&&q.once&&t.splice(k,1)}}return m.returnValue}},b.define("module/regSchool",d)}(baidu,window.Pass),!function(b,c){window.TPL2LOGOURL&&c.options&&c.options.product in window.TPL2LOGOURL&&(b(".mod-header a").attr({href:window.TPL2LOGOURL[c.options.product].url}),b(".mod-header img").attr({src:window.TPL2LOGOURL[c.options.product].logo})),b(".mod-header a").css({display:"block"});var d=function(m){if(c.isSchoolReg){var q=m,h=function(){b(q.getElement("school")).addClass("pass-text-input-error"),b(q.getElement("schoolError")).show(),b(q.getElement("schoolSucc")).hide()},j=function(){b(q.getElement("school_placeholder")).hide(),b(q.getElement("school")).removeClass("pass-text-input-error"),b(q.getElement("schoolError")).hide(),b(q.getElement("schoolSucc")).show()},g=function(i,l){"placeholder" in document.createElement("input")?b(q.getElement(i)).attr({placeholder:l}):(b(q.getElement(i+"_placeholder")).show(),b(q.getElement(i+"_placeholder")).on("mousedown",function(){q.getElement(i).focus()}))},e=new Pass.module.regSchool;e.on("selectSchool",function(i,l){q.getElement("school").value=l.schoolName,j()});var p=q.tangram_guid+"__",k='<p id="'+p+'schoolWrapper" class="pass-form-item pass-form-item-school" style="display:block"><label for="'+p+'school" id="'+p+'schoolLabel" class="pass-label pass-label-school">学校</label><input id="'+p+'school" type="text" name="passport_college_0_school_name" class="pass-text-input pass-text-input-school" autocomplete="off"><span id="'+p+'schoolError" class="pass-item-error pass-item-error-school" style="display: none;">请选择学校</span><span id="'+p+'schoolSucc" class="pass-item-succ pass-item-succ-school" style="display: none;"></span><span id="'+p+'school_placeholder" class="pass-placeholder pass-placeholder-school" style="display: none;">请选择学校</span></p>';b(q.getElement("passwordWrapper")).after(k),b(q.getElement("school")).on("focus",function(){e.show()}),b(q.getElement("school")).on("keyup",function(i){i.preventDefault()}),b(q.getElement("school")).on("keydown",function(i){i.preventDefault()}),b(q.getElement("form")).on("submit",function(){q.getElement("school").value?j():h()}),g("school","请选择学校"),q.on("beforeSubmit",function(i){q.getElement("school").value&&""!=q.getElement("school").value||(i.returnValue=!1)})}};if(baidu("#reg_content").length>0&&passport.use("reg",{tangram:!0},function(e){normalReg=new e.passport.reg(c.options),normalReg.on("render",function(){var g={phone:/^1[3456789]\d{9}$/,email:/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/};c.defaultAccount&&(g.phone.test(c.defaultAccount)||g.email.test(c.defaultAccount))&&(normalReg.getElement("account")&&(normalReg.getElement("account").value=c.defaultAccount),setTimeout(function(){normalReg.getElement("password").focus()},100))}),normalReg.render("reg_content"),d(normalReg)}),baidu("#login_btn").length>0){var f,a=!1;baidu("#login_btn").on("click",function(){if(f||a){f&&f.show()}else{a=!0;var e=["qzone","tsina"],g=1;"0"==c.hasAuthsite&&(e=!1,g=0),baidu.sio.callByBrowser(document.location.protocol+"//passport.baidu.com/passApi/js/uni_login_wrapper.js?v={__fis_timestamp}",function(){f=passport.pop.init({tangram:!0,cache:!0,loginMerge:!0,staticPage:c.options.staticPage,color:c.options.color,subpro:c.options.subpro,apiOpt:{product:c.options.product,tangram:!1,u:c.options.retu,qrcode:c.options.qrcode,staticPage:c.options.staticPage,sms:g},authsite:e,registerLink:c.options.registerLink}),f.show()})}})}setTimeout(function(){document.getElementById("mod_feedback")&&(document.getElementById("mod_feedback").href="http://passport.baidu.com/v2/?ucenterfeedback#reg")},1000)}(baidu,window.Pass);