layui.define("layer",function(w){var m=layui.$,C=layui.layer,z=layui.hint(),j=layui.device(),k="form",b=".layui-form",D="layui-this",g="layui-hide",y="layui-disabled",B=function(){this.config={verify:{required:[/[\S]+/,"必填项不能为空"],phone:[/^1\d{10}$/,"请输入正确的手机号"],email:[/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,"邮箱格式不正确"],url:[/(^#)|(^http(s*):\/\/[^\s]+\.[^\s]+)/,"链接格式不正确"],number:function(a){if(!a||isNaN(a)){return"只能填写数字"}},date:[/^(\d{4})[-\/](\d{1}|0\d{1}|1[0-2])([-\/](\d{1}|0\d{1}|[1-2][0-9]|3[0-1]))*$/,"日期格式不正确"],identity:[/(^\d{15}$)|(^\d{17}(x|X|\d)$)/,"请输入正确的身份证号"]}}};B.prototype.set=function(c){var a=this;return m.extend(!0,a.config,c),a},B.prototype.verify=function(c){var a=this;return m.extend(!0,a.config.verify,c),a},B.prototype.on=function(c,a){return layui.onevent.call(this,k,c,a)},B.prototype.val=function(f,d){var c=m(b+'[lay-filter="'+f+'"]');c.each(function(i,h){var l=m(this);layui.each(d,function(s,r){var o,n=l.find('[name="'+s+'"]');n[0]&&(o=n[0].type,"checkbox"===o?n[0].checked=r:"radio"===o?n.each(function(){this.value===r&&(this.checked=!0)}):n.val(r))})}),q.render(null,f)},B.prototype.render=function(f,c){var i=this,a=m(b+function(){return c?'[lay-filter="'+c+'"]':""}()),h={select:function(){var u,I="请选择",G="layui-form-select",o="layui-select-title",l="layui-select-none",E="",s=a.find("select"),H=function(e,d){m(e.target).parent().hasClass(o)&&!d||(m("."+G).removeClass(G+"ed "+G+"up"),u&&E&&u.val(E)),u=null},F=function(R,Q,L){var N,e=m(this),n=R.find("."+o),v=n.find("input"),K=R.find("dl"),O=K.children("dd"),M=this.selectedIndex;if(!Q){var d=function(){var S=R.offset().top+R.outerHeight()+5-p.scrollTop(),t=K.outerHeight();M=e[0].selectedIndex,R.addClass(G+"ed"),O.removeClass(g),N=null,O.eq(M).addClass(D).siblings().removeClass(D),S+t>p.height()&&S>=t&&R.addClass(G+"up")},P=function(t){R.removeClass(G+"ed "+G+"up"),v.blur(),N=null,t||J(v.val(),function(S){S&&(E=K.find("."+D).html(),v&&v.val(E))})};n.on("click",function(t){R.hasClass(G+"ed")?P():(H(t,!0),d()),K.find("."+l).remove()}),n.find(".layui-edge").on("click",function(){v.focus()}),v.on("keyup",function(S){var t=S.keyCode;9===t&&d()}).on("keydown",function(U){var T=U.keyCode;9===T&&P();var S=function(X,V){var ab,t;if(U.preventDefault(),V=function(){return V&&V[0]?V:N&&N[0]?N:O.eq(M)}(),t=V[X](),ab=V[X]("dd"),t[0]){if(N=V[X](),!ab[0]||ab.hasClass(y)){return S(X,N)}ab.addClass(D).siblings().removeClass(D);var Y=K.children("dd.layui-this"),aa=Y.position().top,W=K.height(),Z=Y.height();aa>W&&K.scrollTop(aa+K.scrollTop()-W+Z-5),aa<0&&K.scrollTop(aa+K.scrollTop())}};38===T&&S("prev"),40===T&&S("next"),13===T&&(U.preventDefault(),K.children("dd."+D).trigger("click"))});var J=function(V,U,T){var W=0;layui.each(O,function(){var Y=m(this),X=Y.text(),Z=X.indexOf(V)===-1;(""===V||"blur"===T?V!==X:Z)&&W++,"keyup"===T&&Y[Z?"addClass":"removeClass"](g)});var S=W===O.length;return U(S),S},r=function(U){var T=this.value,S=U.keyCode;return 9!==S&&13!==S&&37!==S&&38!==S&&39!==S&&40!==S&&(J(T,function(t){t?K.find("."+l)[0]||K.append('<p class="'+l+'">无匹配项</p>'):K.find("."+l).remove()},"keyup"),void (""===T&&K.find("."+l).remove()))};L&&v.on("keyup",r).on("blur",function(T){var S=e[0].selectedIndex;u=v,E=m(e[0].options[S]).html(),setTimeout(function(){J(v.val(),function(t){E||v.val("")},"blur")},200)}),O.on("click",function(){var S=m(this),t=S.attr("lay-value"),T=e.attr("lay-filter");return !S.hasClass(y)&&(S.hasClass("layui-select-tips")?v.val(""):(v.val(S.text()),S.addClass(D)),S.siblings().removeClass(D),e.val(t).removeClass("layui-form-danger"),layui.event.call(this,k,"select("+T+")",{elem:e[0],value:t,othis:R}),P(!0),!1)}),R.find("dl>dt").on("click",function(t){return !1}),m(document).off("click",H).on("click",H)}};s.each(function(O,L){var n=m(this),J=n.next("."+G),R=this.disabled,P=L.value,N=m(L.options[L.selectedIndex]),Q=L.options[0];if("string"==typeof n.attr("lay-ignore")){return n.show()}var M="string"==typeof n.attr("lay-search"),t=Q?Q.value?I:Q.innerHTML||I:I,K=m(['<div class="'+(M?"":"layui-unselect ")+G,(R?" layui-select-disabled":"")+'">','<div class="'+o+'">','<input type="text" placeholder="'+t+'" '+('value="'+(P?N.html():"")+'"')+(M?"":" readonly")+' class="layui-input'+(M?"":" layui-unselect")+(R?" "+y:"")+'">','<i class="layui-edge"></i></div>','<dl class="layui-anim layui-anim-upbit'+(n.find("optgroup")[0]?" layui-select-group":"")+'">',function(r){var d=[];return layui.each(r,function(S,v){0!==S||v.value?"optgroup"===v.tagName.toLowerCase()?d.push("<dt>"+v.label+"</dt>"):d.push('<dd lay-value="'+v.value+'" class="'+(P===v.value?D:"")+(v.disabled?" "+y:"")+'">'+v.innerHTML+"</dd>"):d.push('<dd lay-value="" class="layui-select-tips">'+(v.innerHTML||I)+"</dd>")}),0===d.length&&d.push('<dd lay-value="" class="'+y+'">没有选项</dd>'),d.join("")}(n.find("*"))+"</dl>","</div>"].join(""));J[0]&&J.remove(),n.after(K),F.call(this,K,R,M)})},checkbox:function(){var n={checkbox:["layui-form-checkbox","layui-form-checked","checkbox"],_switch:["layui-form-switch","layui-form-onswitch","switch"]},l=a.find("input[type=checkbox]"),d=function(s,r){var o=m(this);s.on("click",function(){var e=o.attr("lay-filter"),t=(o.attr("lay-text")||"").split("|");o[0].disabled||(o[0].checked?(o[0].checked=!1,s.removeClass(r[1]).find("em").text(t[1])):(o[0].checked=!0,s.addClass(r[1]).find("em").text(t[0])),layui.event.call(o[0],k,r[2]+"("+e+")",{elem:o[0],value:o[0].value,othis:s}))})};l.each(function(J,E){var F=m(this),e=F.attr("lay-skin"),K=(F.attr("lay-text")||"").split("|"),v=this.disabled;"switch"===e&&(e="_"+e);var I=n[e]||n.checkbox;if("string"==typeof F.attr("lay-ignore")){return F.show()}var H=F.next("."+I[0]),G=m(['<div class="layui-unselect '+I[0],E.checked?" "+I[1]:"",v?" layui-checkbox-disbaled "+y:"",'"',e?' lay-skin="'+e+'"':"",">",function(){var r=E.title.replace(/\s/g,""),o={checkbox:[r?"<span>"+E.title+"</span>":"",'<i class="layui-icon layui-icon-ok"></i>'].join(""),_switch:"<em>"+((E.checked?K[0]:K[1])||"")+"</em><i></i>"};return o[e]||o.checkbox}(),"</div>"].join(""));H[0]&&H.remove(),F.after(G),d.call(this,G,I)})},radio:function(){var o="layui-form-radio",l=["&#xe643;","&#xe63f;"],d=a.find("input[type=radio]"),r=function(e){var u=m(this),t="layui-anim-scaleSpring";e.on("click",function(){var v=u[0].name,E=u.parents(b),n=u.attr("lay-filter"),s=E.find("input[name="+v.replace(/(\.|#|\[|\])/g,"\\$1")+"]");u[0].disabled||(layui.each(s,function(){var F=m(this).next("."+o);this.checked=!1,F.removeClass(o+"ed"),F.find(".layui-icon").removeClass(t).html(l[1])}),u[0].checked=!0,e.addClass(o+"ed"),e.find(".layui-icon").addClass(t).html(l[0]),layui.event.call(u[0],k,"radio("+n+")",{elem:u[0],value:u[0].value,othis:e}))})};d.each(function(n,e){var E=m(this),v=E.next("."+o),F=this.disabled;if("string"==typeof E.attr("lay-ignore")){return E.show()}v[0]&&v.remove();var t=m(['<div class="layui-unselect '+o,e.checked?" "+o+"ed":"",(F?" layui-radio-disbaled "+y:"")+'">','<i class="layui-anim layui-icon">'+l[e.checked?0:1]+"</i>","<div>"+function(){var s=e.title||"";return"string"==typeof E.next().attr("lay-radio")&&(s=E.next().html(),E.next().remove()),s}()+"</div>","</div>"].join(""));E.after(t),r.call(this,t)})}};return f?h[f]?h[f]():z.error("不支持的"+f+"表单渲染"):layui.each(h,function(l,d){d()}),i};var x=function(){var n=m(this),F=q.config.verify,I=null,i="layui-form-danger",t={},H=n.parents(b),r=H.find("*[lay-verify]"),G=n.parents("form")[0],l=H.find("input,select,textarea"),E=n.attr("lay-filter");if(layui.each(r,function(s,a){var o=m(this),J=o.attr("lay-verify").split("|"),h=o.attr("lay-verType"),v=o.val();if(o.removeClass(i),layui.each(J,function(L,u){var M,K="",d="function"==typeof F[u];if(F[u]){var M=d?K=F[u](v,a):!F[u][0].test(v);if(K=K||F[u][1],M){return"tips"===h?C.tips(K,function(){return"string"==typeof o.attr("lay-ignore")||"select"!==a.tagName.toLowerCase()&&!/^checkbox|radio$/.test(a.type)?o:o.next()}(),{tips:1}):"alert"===h?C.alert(K,{title:"提示",shadeClose:!0}):C.msg(K,{icon:5,shift:6}),j.android||j.ios||a.focus(),o.addClass(i),I=!0}}}),I){return I}}),I){return !1}var f={};return layui.each(l,function(d,c){if(c.name=(c.name||"").replace(/^\s*|\s*&/,""),c.name){if(/^.*\[\]$/.test(c.name)){var a=c.name.match(/^(.*)\[\]$/g)[0];f[a]=0|f[a],c.name=c.name.replace(/^(.*)\[\]$/,"$1["+f[a]+++"]")}/^checkbox|radio$/.test(c.type)&&!c.checked||(t[c.name]=c.value)}}),layui.event.call(this,k,"submit("+E+")",{elem:this,form:G,field:t})},q=new B,A=m(document),p=m(window);q.render(),A.on("reset",b,function(){var a=m(this).attr("lay-filter");setTimeout(function(){q.render(null,a)},50)}),A.on("submit",b,x).on("click","*[lay-submit]",x),w(k,q)});